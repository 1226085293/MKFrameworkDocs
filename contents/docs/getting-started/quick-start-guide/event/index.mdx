---
title: äº‹ä»¶
description: æ¸¸æˆä¸­å¯¹è±¡çš„é€šä¿¡æ–¹å¼
noLink: false
order: 1
---

æ¡†æž¶ä¸­çš„äº‹ä»¶å¯¹è±¡ç±»åž‹æ˜¯ `mk.EventTarget`ï¼Œç»§æ‰¿äºŽ `cc.EventTarget`ï¼Œä¸”æ‰€æœ‰æŽ¥å£éƒ½æ˜¯ç±»åž‹å®‰å…¨çš„ ðŸ“¦

## åˆ›å»ºäº‹ä»¶å¯¹è±¡

```ts
interface EventType {
    /** æµ‹è¯•äº‹ä»¶ */
    test: (
        /** æµ‹è¯•å‚æ•° */
        num: number
    ) => string;
}

const event = new mk.EventTarget<EventType>();
```

## äº‹ä»¶æ´¾å‘

```
event.emit(event.key.test, 123);
```

## äº‹ä»¶ç›‘å¬

å½“ä½¿ç”¨ `emit` æ´¾å‘äº‹ä»¶æ—¶, å¯ä»¥ä½¿ç”¨ `on` æˆ– `once` æŽ¥å£ç›‘å¬æŒ‡å®šçš„äº‹ä»¶æ´¾å‘

```
const onTest = (): void => {
	// ...äº‹ä»¶å›žè°ƒé€»è¾‘
};

event.on(event.key.test, onTest, this);
```

## äº‹ä»¶æ³¨é”€

å½“æƒ³è¦å–æ¶ˆ `on` å’Œ `once` æ³¨å†Œçš„äº‹ä»¶å›žè°ƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `off` å’Œ `targetOff` å–æ¶ˆäº‹ä»¶ç›‘å¬

```ts
// å–æ¶ˆç±»åž‹ä¸º test çš„äº‹ä»¶
event.off(event.key.test);
// å–æ¶ˆç±»åž‹ä¸º test ä¸”å›žè°ƒå‡½æ•°ä¸º onTest çš„äº‹ä»¶
event.off(event.key.test, onTest);
// å–æ¶ˆç±»åž‹ä¸º test ä¸”å›žè°ƒå‡½æ•°ä¸º onTest ä¸”äº‹ä»¶ç›®æ ‡ä¸º this çš„äº‹ä»¶
event.off(event.key.test, onTest, this);
// å–æ¶ˆæ‰€æœ‰äº‹ä»¶ç›®æ ‡ä¸º this çš„äº‹ä»¶
event.targetOff(this);
```

## äº‹ä»¶è¯·æ±‚ï¼ˆæ¡†æž¶æ‰©å±•ï¼‰

äº‹ä»¶è¯·æ±‚æŽ¥å£ `request` ç›¸å½“äºŽ `emit`ï¼Œä½†æ˜¯å¯ä»¥èŽ·å– `on` æˆ– `once` å›žè°ƒå‡½æ•°çš„è¿”å›žå€¼

```ts
Promise.all(event.request(event.key.test, 123)).then((resultList) => {
    // æ‰€æœ‰ test ç±»åž‹äº‹ä»¶çš„è¿”å›žå€¼
    console.log(resultList);
});
```
